<div class="flex justify-between items-center" id="<%= dom_id @episode %>">
  <div class="text-sky-800 dark:text-teal-300 text-2xl m-2 underline underline-offset-8">
    <%= @episode.name %>
  </div>
  <div class="text-lg text-sky-700 dark:text-teal-400 m-2" >
    Project: <span> <%= link_to @episode.assignment.name, project_path(@episode.assignment), class:"text-indigo-500 text-bold hover:text-indigo-300 px-1 py-1" %> </span>
  </div>
</div>
<div class=" md:flex md:-mx-5 py-4">
  <div class="md:flex-1 md:basis-1/2 md:px-5">
    <% if @episode.lesson_video.attached? %>
      <div class="bg-sky-100 dark:bg-black rounded-2xl flex items-center justify-center" style="width: 640px; height: 480px; max-width: 100%;">
        <%= video_tag @episode.lesson_video, style: "max-width: 100%; max-height: 100%;", controls: true, class: "max-w-full max-h-full" %>
      </div>
    <% end %>
    <div class="flex px-1 py-4">
      <% if @episode.teacher.present? %>
        <%= link_to @episode.teacher.name, display_teacher_path(@episode.teacher), class:'text-blue-600 hover:text-blue-400' %>
      <% end %>
      <div class="w-2/3 text-sky-900 dark:text-teal-300 shadow dark:shadow-xl dark:bg-zinc-900 rounded-2xl mr-2 px-3 py-3 flex-auto">
        <%= @episode.description %>
      </div>
      <div class="w-1/3 ml-2 flex-auto text-sky-900 dark:text-teal-300">
        <p class="font-bold"> Skills: </p>
        <%= @episode.skills.map{|skill| link_to(skill.name, display_skill_path(skill), class:"text-indigo-600 pl-4 hover:text-indigo-400")}.join(', ').html_safe %>
      </div>
    </div>
    <div class="flex">
      <div class="flex-auto">
        <p class="text-sky-800 dark:text-teal-300 m-2">
          Student Reflection:
        </p>
        <div class="flex-auto bg-white text-sky-800 dark:text-teal-300 border shadow border-sky-100 dark:border-sky-800 dark:bg-zinc-900 bg-opacity-50 dark:text-teal-300 rounded-2xl m-2 p-6">
          <%= @episode.student_journal %>
        </div>
        <div class="justify-self-end m-4">
          <% if current_user && current_user == @episode.assignment.student.user %>
            <%= 
        link_to("Edit", edit_project_episode_path(@episode.project, @episode), 
          class: "rounded-xl px-3 py-2 border-2 border-indigo-300 bg-indigo-500 hover:border-2 dark:border-zinc-900 hover:bg-indigo-400 hover:border-indigo-100 text-white font-medium whitespace-nowrap")
        %>
          <% end %>
        </div>
      </div>
      <div class="flex-auto">
        <p class="text-sky-800 dark:text-teal-300 m-2">
          Teacher Notes:
        </p>
        <div class="flex-auto bg-white text-sky-800 dark:text-teal-300 border shadow border-sky-100 dark:border-sky-800 dark:bg-zinc-900 bg-opacity-50 dark:text-teal-300 rounded-2xl m-2 p-6">
          <%= @episode.teacher_journal %>
        </div>
        <div class="justify-self-end m-4">
          <% if current_user && current_user == @episode.assignment.teacher.user %>
            <%= link_to("Edit", edit_project_episode_path(@episode.project, @episode),
          class: "rounded-xl px-3 py-2 border-2 border-indigo-300 bg-indigo-500 dark:border-zinc-900 hover:border-2 hover:bg-indigo-400 hover:border-indigo-100 text-white font-medium whitespace-nowrap")
        %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
  <div class="w-full md:flex-1 md:basis-1/2 md:px-5">
    <h1 class="mb-2 text-xl text-sky-900 dark:text-teal-300">
      Episodes:
    </h1>
    <% @episode.project.lessons.order(:sort).each do |lesson| %>
      <div class="">
        <p class="text-lg p-2 border-b border-zinc-300 text-orange-700 hover:text-amber-500 dark:text-orange-600 dark:hover:text-orange-400 italic" > <%= link_to lesson.name, project_episode_path(@episode) %> </p>
      </div>
    <% end %>
  </div>
</div>
<%= render partial:"/comments/module", locals:{annotation:@episode} %>
