  <%= turbo_frame_tag "journal_#{journal.id}_summary_video" do %>
  <% if journal.summary_video.attached? %>
    <div class="bg-black flex items-center justify-center aspect-[4/3] xl:aspect-auto xl:max-w-[640px] xl:h-[480px] relative group"
           data-controller="video-poster video-player">
      <%= video_tag journal.summary_video,
          controls: false,
          preload: "metadata",
          class: "w-full h-full object-contain",
          data: {
            controller: "video-autoplay",
            video_autoplay_next_url_value: journal.first_journal_entry ? journal_journal_entry_path(journal, journal.first_journal_entry) : nil,
            video_autoplay_next_name_value: journal.first_journal_entry&.name,
            video_autoplay_next_date_value: journal.first_journal_entry&.date&.strftime("%B %d, %Y"),
            video_poster_target: "video",
            video_player_target: "video",
            action: "click->video-player#togglePlay"
          } %>
      <div data-video-poster-target="overlay" class="absolute inset-0 flex flex-col items-center justify-center pointer-events-none  bg-black">
        <h2 class="text-white text-3xl font-bold text-center px-8"><%= journal.name %></h2>
        <p class="text-gray-300 text-xl mt-3"><%= journal.user.name %></p>
        <% if journal.journal_entries.any? %>
          <p class="text-gray-400 text-lg mt-2">
            <%= journal.journal_entries.minimum(:date)&.strftime("%b %d, %Y") %> - <%= journal.journal_entries.maximum(:date)&.strftime("%b %d, %Y") %>
          </p>
          <p class="text-gray-400 text-lg mt-1">
            <%= journal.journal_entries.count %> <%= 'Journal Entry'.pluralize(journal.journal_entries.count) %>
          </p>
        <% end %>
      </div>
      <%= render 'shared/video_player_controls' %>
    </div>
    <div class="text-center">
      <%= link_to edit_journal_path(@journal, field: :summary_video), class: "text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 text-sm" do %>
        <span>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 inline">
            <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
          </svg> Video</span>
      <% end %>
    </div>
  <% else %>
    <div class="bg-black flex items-center justify-center aspect-[4/3] xl:aspect-auto xl:max-w-[640px] xl:h-[480px]">
      <%= form_with(model: journal) do |form| %>
        <div class="dropzone dropzone-default dz-clickable border  border-gray-300 rounded p-4" data-controller="dropzone" data-dropzone-max-file-size="10000000" data-dropzone-accepted-files="video/*" data-turbo-permanent>
          <%= form.file_field :summary_video, direct_upload: true, data: { 'dropzone-target': "input", 'dropzone-capture-mode-value': 'environment', autosubmit: true, turbosubmit: nil, camera: false } %>
          <div class="dropzone-msg dz-message needsclick">
            <h2>No Video Summary Uploaded</h2>
            <h3 class="dropzone-msg-title">Drag Video Summary File Here</h3>
            <span class="dropzone-msg-desc">Click To Browse</span>
          </div>
        </div>
        <%= form.submit class: "w-full sm:w-auto rounded-lg my-2 px-3 py-2 bg-blue-600 hover:bg-blue-400 text-white inline-block font-medium cursor-pointer" %>
      <% end %>
    </div>
  <% end %>
<% end %>