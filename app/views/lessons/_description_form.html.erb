<%= turbo_frame_tag "lesson_#{@lesson.id}_description" do %>
  <%= form_with(model: @lesson, url: lesson_path(@lesson, {format: :html}), data: { controller: "copyright-toggle", action: "input->copyright-toggle#toggle" }) do |form| %>
    <div>
      <strong class="dark:text-gray-200">Description:</strong>
      <%= form.rich_text_area :description, class: "trix-content" %>
      <div class="mt-4 space-y-3">
        <div class="flex items-center gap-2">
          <%= form.check_box :description_copyrighted,
              class: "w-4 h-4 text-blue-600 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500",
              data: { copyright_toggle_target: "checkbox" } %>
          <%= form.label :description_copyrighted, "This material is copyrighted", class: "text-sm font-medium text-gray-700 dark:text-gray-200" %>
        </div>
        <div data-copyright-toggle-target="urlField" class="<%= @lesson.description_copyrighted? ? '' : 'hidden' %>">
          <%= form.label :description_purchase_url, "Amazon Purchase Link:", class: "block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1" %>
          <%= form.text_field :description_purchase_url,
              placeholder: "https://www.amazon.com/...",
              class: "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:text-gray-200" %>
        </div>
      </div>
      <div class="mt-4 flex gap-2">
        <%= form.submit "Save", class: "px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg font-medium cursor-pointer" %>
        <%= link_to "Cancel", lesson_path(@lesson), class: "px-4 py-2 bg-gray-100 hover:bg-gray-50 rounded-lg font-medium" %>
      </div>
    </div>
  <% end %>
<% end %>
