<%= turbo_frame_tag "lesson_#{@lesson.id}_lesson_video" do %>
  <div class="bg-black flex items-center justify-center" style="width: 640px; height: 480px; max-width: 100%;">
    <%= form_with(model: @lesson, url: lesson_path(@lesson, {format: :html})) do |form| %>
      <div class="dropzone dropzone-default dz-clickable border  border-gray-300 rounded p-4" data-controller="dropzone" data-dropzone-max-file-size="10000000" data-dropzone-accepted-files="video/*" data-turbo-permanent>
        <%= form.file_field :summary_video, direct_upload: true, data: { 'dropzone-target': "input", 'dropzone-capture-mode-value': 'environment', autosubmit: true, turbosubmit: nil, camera: false } %>
        <div class="dropzone-msg dz-message needsclick">
          <h3 class="dropzone-msg-title">Drag Lesson Video File Here</h3>
          <span class="dropzone-msg-desc">Click To Browse</span>
        </div>
      </div>
      <div class="p-4">
        <div class="text-center text-gray-500 my-2">OR</div>
        <div>
          <%= form.label :video_url, "YouTube URL", class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2" %>
          <%= form.text_field :video_url,
              placeholder: "https://www.youtube.com/watch?v=...",
              class: "w-full rounded-lg px-3 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white" %>
          <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Paste a YouTube video URL (e.g., https://www.youtube.com/watch?v=... or https://youtu.be/...)</p>
        </div>
      </div>
      <div class="text-center p-4">
        <%= link_to("Cancel", lesson_path(@lesson), class: "inline-block rounded-lg px-4 py-2 text-sm text-white bg-red-600 hover:bg-red-400") %>
        <%= form.submit class: "w-full sm:w-auto rounded-lg my-2 px-3 py-2 bg-blue-600 hover:bg-blue-400 text-white inline-block font-medium cursor-pointer" %>
      </div>
    <% end %>
  </div>
<% end %>